This is a media player for events. It lets to generate a playlist of media files and play them in a loop or cue them up. Supported file types are mp4, webm, ogg, mp3, png, jpeg, websites and youtube videos.

# Architecture

The app is split into two parts:

- Server - responsible for handling the playlist and serving the media files
- Player - responsible for playing the media files
- Manager - responsible for managing the playlist

The server and manager are built with NodeJS and ElectronJS. The player and manager are built with VueJS 3 and Vite.

## Electron app

The is built into a Electron app. It has a UI for managing the playlist. App can be started with `npm run start`. It serves the files to the player and manager as static files. The server runs as process in the electron app and is started with the electron app. It opens a window for the manager and a window for the player. It allows the user to choose which screen to use for the player. Player can be fullscreen or windowed. There is also a button to open the manager in a new window.

## Player

The player is a HTML5 player that plays the media files. It can be started with `npm run player`. Player communicates with the server via WebSockets. A playlist ID is used to identify the playlist. The ID is passed as a query parameter to the player. The player is a fullscreen app and media fills the screen. 
The player will support the following media files:

- mp4
- webm
- ogg
- mp3
- png
- jpeg
- websites
- youtube videos (via iframe with autoplay)

The player will support the following playlist types:

- loop (until next item is activated)
- cue (play next item when previous is finished)

Player has the following effects for media files:

- fade in
- fade out
- cross fade
- cut (instant transition)

Every media file has a duration and transition time. Transition time is the time it takes to transition from one media file to another. When a video file doesnt have a duration, the player will try to get it from the file. When a video file doesnt have a transition time, the player will use the default transition time.

A playlist can have default media item that is played when there is no active item (for example a black screen or background image/video). Default media item is optional.

The player will connect to the server and wait for the playlist to be ready. Once the playlist is ready, the player will start playing the media files when a command is received from the server. The player will also send a message to the server when it is ready to play. Player will also send its status to the server (playing, paused, stopped, time, etc.)
When the server sends a command to the player, the player will execute it. Such as play, pause, stop, next, previous, etc.

## Manager

The manager is a web app that allows to manage the playlist. It can be started with `npm run manager`. Manager communicates with the server via WebSockets.  The manager is a desktop app and is built with VueJS 3 and Vite. Player will use TailwindCSS and DaisyUI for styling. It doesnt use TailwindCSS colors but use DaisyUI colors. The manager has the following parts:

- Playlist editor
- Media library
- Selected playlist item settings
- Playlist player (play, pause, stop, next, previous, etc.)
- Preview of the current playlist
- Edit and use mode (edit mode allows to edit the playlist, use mode allows to play the playlist)

User can drag and drop playlist items to change their order. User can also drag and drop playlist items to the media library to add them to the playlist.
User can change the settings of the selected playlist item in the selected playlist item settings. User can remove playlist items from the playlist.

Manager will use Vuex for state management. Do not use direct state mutation.

Changes are automatically sent to the server.

### Playlist item editing
- Media file
- Duration
- Transition (Fade in, Fade out, Cross fade, Cut - default)
- Loop (default: false)
- Start time (default: 0)
- End time (default: duration)
- Volume (default: 1)
- Mute (default: false)
- Audio track (default: 0)

## Server

The server is a NodeJS app that serves the playlist to the player. It can be started with `npm run server`. Server communicates with the player via WebSockets.

A playlist is a JSON file that contains the playlist items. The playlist items are stored in the server and are accessible via WebSockets.

Every playlist has a unique ID. The ID is used to identify the playlist. The ID is generated by the server. A playlist saved into a folder with the same name as the ID. List of playlists is stored in a JSON file. User can choose where the playlist is saved (provided by the manager app).

If the playlist changes the server will send a message to the player to update the playlist.

The server will track the player state and send it to the manager app.

The player will support OSC commands to control the player. OSC commands are:

- play
- pause
- stop
- next
- previous
- volume
- mute
- fullscreen
- windowed
- screen


# Tech stack

This app has already been initialized with the following:

- NodeJS
- ElectronJS
- VueJS 3
- Vuex
- Vite
- Typescript
- TailwindCSS v4
- DaisyUI
- fastify
- @fastify/websocket
- osc.js

